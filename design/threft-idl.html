---
layout: page
title: Threft.io IDL
tagline: 
---
{% include JB/setup %}

<style>
	pre a {
		cursor: pointer;
	}
</style>
The Threft.io <abbr title="Interface Definition Language">IDL</abbr> is based on the thrift IDL, but is a lot stricter.
Some un-used features are removed.

My current approach to this is to implement the thrift parser into the <a target="_blank" href="https://github.com/threft/threft/tree/master/tidm" >tidm package</a> and write down all things I like/dislike.

<h3>Basic definitions</h3>

<h4>Characters</h4>
<pre>
<a id="newline"               >newline</a>        = /* the Unicode code point U+000A */ .
<a id="unicode_char"     >unicode_char</a>   = /* an arbitrary Unicode code point except newline */ .
<a id="unicode_letter" >unicode_letter</a> = /* a Unicode code point classified as "Letter" */ .
<a id="unicode_digit"   >unicode_digit</a>  = /* a Unicode code point classified as "Decimal Digit" */ .
<a id="letter"                 >letter</a>         = "a" … "z" | "A" … "Z" .
<a id="decimal_digit"   >decimal_digit</a>  = "0" … "9" .
<a id="decimals"             >decimals</a>       = <a href="#decimal_digit">decimal_digit</a> { <a href="#decimal_digit">decimal_digit</a> } .
</pre>

<h4>Identifier</h4>
An identifier can contain letters, digits, dots and underscores. It must start with a letter or underscore.
<pre>
<a id="identifier" >identifier</a> = ( <a href="#letter">letter</a> | "_") { <a href="#letter">letter</a> | <a href="#decimal_digit">decimal_digit</a> | "_" | "-" | "." } .

lowercase
Uppercase
camelCase
_fooBar
foo-bar
fooBarÆ   // illegal: contains invalid character 'Æ'
-fooBar   // illegal: does not start with letter or underscore
0fooBar   // illegal: does not start with letter or underscore
</pre>

<h4>String literal</h4>
<pre>
<a id="string_literal" >string_literal</a> = `"` { <a href="#unicode_char">unicode_char</a> | `\"` | "\n" } `"`

"foobar"
"foo"bar"    // illegal: " should be escaped
"foo\"bar"   // \" is escaped to "
"foo\nbar"   // \n is escaped to a newline (unicode code point U+000A)
</pre>

<h3>Constants</h3>
Constants are defined and set with a constant value.

<h4>Constant definitions</h4>
<pre>
<a id="const" >const</a> = "const" <a href="#fieldtype">fieldtype</a> <a href="#identifier">identifier</a> "=" <a href="#const_value">const_value</a>
</pre>

<h4>Constant values</h4>
<pre>
<a id="const_value"         >const_value</a>        = <a href="#literal">literal</a> | <a href="#identifier">identifier</a> | <a href="#const_value_int">const_value_int</a> | <a href="#const_value_double">const_value_double</a> | <a href="#const_value_list">const_value_list</a> | <a href="#const_value_map">const_value_map</a>
<a id="const_value_int"     >const_value_int</a>    = ["+" | "-"] <a href="#decimals">decimals</a>
<a id="const_value_double"  >const_value_double</a> = ["+" | "-"] <a href="#decimals">decimals</a> ["." <a href="#decimals">decimals</a> ] [ ("E" | "e") <a href="#const_value_int">const_value_int</a> ]
<a id="const_value_list"    >const_value_list</a>   = "[" {<a href="#const_value">const_value</a> } "]"
<a id="const_value_map"     >const_value_map</a>    = "{" {<a href="#const_value">const_value</a> ":" <a href="#const_value">const_value</a> } "}"
</pre>