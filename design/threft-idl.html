---
layout: page
title: Threft.io IDL
tagline: 
---
{% include JB/setup %}

The Threft.io <abbr title="Interface Definition Language">IDL</abbr> is based on the thrift IDL, but is a lot stricter.
Some un-used features are removed.

My current approach to this is to implement the thrift parser into the <a target="_blank" href="https://github.com/threft/threft/tree/master/tidm" >tidm package</a> and write down all things I like/dislike.

<h3>Basic definitions</h3>

<h4>Characters</h4>
<pre>
newline        = /* the Unicode code point U+000A */ .
unicode_char   = /* an arbitrary Unicode code point except newline */ .
unicode_letter = /* a Unicode code point classified as "Letter" */ .
unicode_digit  = /* a Unicode code point classified as "Decimal Digit" */ .
letter         = "a" … "z" | "A" … "Z" .
decimal_digit  = "0" … "9" .
decimals       = decimal_digit { decimal_digit } .
</pre>

<h4>Identifier</h4>
An identifier can contain letters, digits, dots and underscores. It must start with a letter or underscore.
<pre>
<a href="#identifier" id="identifier" >identifier</a> = ( letter | "_") { letter | decimal_digit | "_" | "-" | "." } .

lowercase
Uppercase
camelCase
_fooBar
foo-bar
fooBarÆ   // illegal: contains invalid character 'Æ'
-fooBar   // illegal: does not start with letter or underscore
0fooBar   // illegal: does not start with letter or underscore
</pre>

<h4>String literal</h4>
<pre>
<a href="#string_literal" id="string_literal" >string_literal</a> = `"` { <a href="#unicode_char>unicode_char</a> | `\"` | "\n" } `"`

"foobar"
"foo"bar"    // illegal: " should be escaped
"foo\"bar"   // \" is escaped to "
"foo\nbar"   // \n is escaped to a newline (unicode code point U+000A)
</pre>

<h3>Constants</h3>
Constants are defined and set with a constant value.

<h4>Constant definitions</h4>

<h4>Constant values</h4>
<pre>
<a href="#const_value" id="const_value"                >const_value</a>        = <a href="#literal">literal</a> | <a href="#identifier">identifier</a> | <a href="#const_value_int">const_value_int</a> | <a href="#const_value_double">const_value_double</a> | <a href="#const_value_list">const_value_list</a> | <a href="#const_value_map">const_value_map</a>
<a href="#const_value_int" id="const_value_int"        >const_value_int</a>    = ["+" | "-"] <a href="#decimals">decimals</a>
<a href="#const_value_double" id="const_value_double"  >const_value_double</a> = ["+" | "-"] <a href="#decimals">decimals</a> ["." <a href="#decimals">decimals</a> ] [ ("E" | "e") <a href="#const_value_int">const_value_int</a> ]
<a href="#const_value_list" id="const_value_list"      >const_value_list</a>   = "[" {<a href="#const_value">const_value</a> } "]"
<a href="#const_value_map" id="const_value_map"        >const_value_map</a>    = "{" {<a href="#const_value">const_value</a> ":" <a href="#const_value">const_value</a> } "}"
</pre>